<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Shsh — Messaggi</title>
<style>
:root{--bg:#0f172a;--card:#0b1220;--accent:#9ca3ff}
html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
body{display:grid;place-items:center;background:linear-gradient(180deg,#071032, #0f172a);color:#e6eef8}
.card{width:min(92vw,720px);padding:3rem;border-radius:18px;background:rgba(255,255,255,0.03);box-shadow:0 8px 30px rgba(2,6,23,0.6);text-align:center;position:relative}
#carousel{overflow:hidden;}
.slide{min-width:100%;transition:transform 0.4s ease;font-size:clamp(20px,6vw,48px);line-height:1.1;margin-bottom:1rem}
#slides{display:flex;}
#updated{font-size:0.9rem;opacity:0.8;margin-bottom:1rem}
.nav-btn{cursor:pointer;background:rgba(255,255,255,0.06);border:none;padding:0.6rem 1rem;border-radius:8px;color:#e6eef8;margin:0 0.5rem;font-size:1rem}
.nav{margin-top:1rem}
.hint{margin-top:1rem;font-size:0.85rem;color:var(--accent)}
footer{margin-top:1.5rem;font-size:0.85rem;opacity:0.7}
</style>
</head>
<body>
<div style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; border:10px solid #9ca3ff; box-sizing:border-box; border-radius:20px; z-index:9999;"></div>


<main class="card">
<div id="carousel">
<div id="slides"></div>
</div>
<div class="nav">
<button class="nav-btn" id="prevBtn">◀</button>
<button class="nav-btn" id="nextBtn">▶</button>
</div>
<div id="updated"></div>
<div class="hint">Scorri tra i messaggi ✌️</div>
<footer>Modifica o aggiungi file <code>message1.txt, message2.txt...</code> su GitHub.</footer>
</main>


<script>
// Carica messaggi multipli: message1.txt, message2.txt, ... finché esistono
async function loadMessages(){
const slides = document.getElementById('slides');
const updatedEl = document.getElementById('updated');
let index = 1;
let found = true;
const msgs = [];


while(found){
try{
const res = await fetch(`message${index}.txt`, {cache:'no-store'});
if(!res.ok){ found = false; break; }
const text = (await res.text()).trim();
const lm = res.headers.get('last-modified');
msgs.push({text, lm});
index++;
}catch(e){ found = false; }
}


if(msgs.length === 0){
slides.innerHTML = '<div class="slide">Nessun messaggio trovato</div>';
return;
}


msgs.forEach(m => {
const div = document.createElement('div');
div.className = 'slide';
div.textContent = m.text;
slides.appendChild(div);
});


const last = msgs[msgs.length-1];
if(last.lm){
const d = new Date(last.lm);
if(!isNaN(d)) updatedEl.textContent = 'Ultimo aggiornamento: ' + d.toLocaleString();
}


return msgs.length;
}


let current = 0;
function updateCarousel(){
const slides = document.getElementById('slides');
slides.style.transform = `translateX(${-current*100}%)`;
}


document.getElementById('prevBtn').onclick = () => {
current = Math.max(0, current-1);
updateCarousel();
};
document.getElementById('nextBtn').onclick = () => {
current = Math.min(totalSlides-1, current+1);
updateCarousel();
};


let totalSlides = 0;
loadMessages().then(n => { totalSlides = n; updateCarousel(); });
</script>
</body>
</html>

